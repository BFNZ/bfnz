<%= form_for [:admin, @order_form], url: @order_form.path_for_order, html: {role: "form", class: "form-horizontal"} do |f| %>
  <div class="row">
    <div class="col-sm-8">
      <div class="form-group">
        <div class="col-sm-4">
          <%= f.required_label :title, class: "control-label"%>
          <%= f.select :title, titles_for_select(@order_form), {include_blank: true}, class: "form-control"%>
        </div>
        <div class="col-sm-4">
          <%= f.required_label :first_name, class: "control-label" %>
          <%= f.text_field :first_name, class: "form-control" %>
        </div>
        <div class="col-sm-4">
          <%= f.required_label :last_name, class: "control-label" %>
          <%= f.text_field :last_name, class: "form-control" %>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-12">
          <%= f.required_label :address, label_text: "Postal Address", class: "control-label" %>
          <%= f.text_field :address, class: "addressfinder_widget form-control", placeholder: "Start typing to see a list of addresses to choose from" %>
          <%= f.hidden_field :suburb, class: "hidden-address suburb" %>
          <%= f.hidden_field :city_town, class: "hidden-address city_town" %>
          <%= f.hidden_field :post_code, class: "hidden-address post_code" %>
          <%= f.hidden_field :pxid, class: "hidden-address pxid" %>
          <%= f.hidden_field :ta, class: "hidden-address ta" %>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-6">
          <%= f.label :phone, class: "control-label" %>
          <%= f.text_field :phone, class: "form-control" %>
        </div>
        <div class="col-sm-6">
          <%= f.label :email, class: "control-label" %>
          <%= f.email_field :email, class: "form-control" %>
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-6">
          <%= f.label :method_received, class: "control-label"%>
          <%= f.select :method_received, methods_received_for_select(@order_form), {include_blank: true}, class: "form-control"%>
        </div>
        <div class="col-sm-6">
          <%= f.label :method_of_discovery, class: "control-label"%>
          <%= f.select :method_of_discovery, discovery_methods_for_select(@order_form), {include_blank: true}, class: "form-control"%>
        </div>
      </div>
      <div class="form-group">
        <div class="checkbox col-sm-6">
          <%= f.label :tertiary_student do %>
            <%= f.check_box :tertiary_student, class: 'tertiary-institution-toggle' %>Is the order for a tertiary student?
          <% end %>
        </div>
        <div id="tertiary_institution" class="col-sm-6">
          <%= f.label :tertiary_institution, class: "control-label" %>
          <%= f.text_field :tertiary_institution, class: "form-control" %>
        </div>
      </div>
    </div>

    <div class="col-sm-4">
      <div class="form-group">
        <%= f.label :admin_notes, "Notes", class: "control-label" %>
        <%= f.text_area :admin_notes, class: 'form-control', rows: 10 %>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <div class="form-group">
        <h4>Titles requested</h4>
        <div class="error_msg"><%= @order_form.errors[:item_ids].join %></div>
        <%= f.select :item_ids, items_for_select(@order_form), {}, class: 'imagepicker', multiple: 'multiple' %>
      </div>
      <div class="form-group">
        <div class="checkbox col-sm-6">
          <%= f.label :further_contact_requested do %>
            <%= f.check_box :further_contact_requested %>This person is interested in receiving further contact.
        <% end %>
        </div>
      </div>
    </div>

    <div class="btn-toolbar">
      <div class="col-sm-8">
        <%= f.submit admin_order_form_save_button(@order_form), class: "btn btn-primary" %>
        <%= link_to 'Cancel', :back, class: 'btn btn-default' %>
        <% if @order_form.persisted? %>
          <span class="extra-action">
          <% if @order_form.duplicate? %>
            <%= unmark_duplicate_button(id: @order_form.id, return_to: :edit) %>
          <% else %>
            <%= mark_duplicate_button(@order_form.id) %>
          <% end %>
          <%#= link_to 'Merge another customer into this one', '#', class: 'btn btn-default', id: 'merge-customer-button' %>
          </span>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<%#= form_tag merge_customer_admin_order_path(@order_form.id), id: 'merge-customer-form' do |f| %>
  <%#= label_tag :other_order_id, 'Order ID' %>
  <%#= text_field_tag :other_order_id %>
  <%#= submit_tag 'View Order' %>
<%# end %>
